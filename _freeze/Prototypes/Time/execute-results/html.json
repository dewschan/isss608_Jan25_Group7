{
  "hash": "f9871ea9097e5d642cb0050dd1108d16",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Time Series Forecasting\"\nformat: html\nauthor: \"Sathvika Subramanian\"\ndate: \"March 27, 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  freeze: true\n  warning: false\n---\n\n\n\n# 1. Getting Started\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, readxl, lubridate, tsibble, feasts, fable, fabletools, data.table, ggthemes, scales, viridis, gridExtra, knitr, readxl)\n```\n:::\n\n\n\n# 2. Data Prepartion\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather<- read_csv(\"data/combined_weather_data.csv\")\nMonthly_dengue <- read_xlsx(\"data/Denguecases.xlsx\", sheet = \"Monthly\")\nelectricity_raw <- read_excel(\"data/electricityconsumption.xlsx\", sheet = \"T3.5\", col_names = FALSE)\n```\n:::\n\n\n\n# 3. Data Prep for Weather Data\n\n## Renaming Variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(weather) <- c(\"Station\", \"Year\", \"Month\", \"Day\", \n                            \"DailyRainfall\", \"Highest30minRainfall.x\",\"Highest60minRainfall.x\",\"Highest120minRainfall.x\",\n                          \"MeanTemperature\", \n                            \"MaxTemperature\", \"MinTemperature\", \n                            \"MeanWindSpeed\", \"MaxWindSpeed\", \n                            \"Highest30minRainfall.y\",\"Highest60minRainfall.y\",\"Highest120minRainfall.y\")\n```\n:::\n\n\n\n## Merging Columns\n\nThe columns **`Highest30minRainfall.x`**and **`Highest30minRainfall.y`** need to be merged into a single column. i.e. Whenever one of these columns has an `NA` value, the other column have a valid value, meaning that together they form the complete dataset.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Merge the columns and replace any remaining NA or \"-\" with 0\nweather <- weather %>%\n  mutate(\n    Highest30minRainfall = coalesce(`Highest30minRainfall.x`, `Highest30minRainfall.y`),\n    Highest60minRainfall = coalesce(`Highest60minRainfall.x`, `Highest60minRainfall.y`),\n    Highest120minRainfall = coalesce(`Highest120minRainfall.x`, `Highest120minRainfall.y`)\n  ) %>%\n  # Convert \"-\" to NA, then replace NA with 0\n  mutate(\n    Highest30minRainfall = as.numeric(Highest30minRainfall), \n    Highest30minRainfall = ifelse(is.na(Highest30minRainfall), 0, Highest30minRainfall),\n    \n    Highest60minRainfall = as.numeric(Highest60minRainfall), \n    Highest60minRainfall = ifelse(is.na(Highest60minRainfall), 0, Highest60minRainfall),\n    \n    Highest120minRainfall = as.numeric(Highest120minRainfall), \n    Highest120minRainfall = ifelse(is.na(Highest120minRainfall), 0, Highest120minRainfall)\n  ) %>%\n  # Drop the original columns\n  select(-c(`Highest30minRainfall.x`, `Highest30minRainfall.y`, \n            `Highest60minRainfall.x`, `Highest60minRainfall.y`, \n            `Highest120minRainfall.x`, `Highest120minRainfall.y`))\n```\n:::\n\n\n\n## Converting data type to numeric\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert columns 5 to 10 to numeric\nweather[, 5:10] <- lapply(weather[, 5:10], function(x) {\n  as.numeric(x)  # Convert to numeric\n})\n```\n:::\n\n\n\n## Handling Missing Values\n\nFiltering for rows without all three: mean, max or min temperature.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- weather %>%\n  mutate(\n    MeanTemperature = na_if(MeanTemperature, \"-\"),\n    MaxTemperature = na_if(MaxTemperature, \"-\"),\n    MinTemperature = na_if(MinTemperature, \"-\")\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_na_temp_check <- weather %>% filter(is.na(MeanTemperature) & is.na(MaxTemperature) & is.na(MinTemperature))\nprint(all_na_temp_check)\n```\n:::\n\n\n\n110587 rows of data missing all three!! how do we handle this\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather<- weather %>% filter(!is.na(MeanTemperature) & !is.na(MaxTemperature) & !is.na(MinTemperature))\n```\n:::\n\n\n\n## Filtering only Changi Station from weather data\n\nNarrowing down our analyse only on Changi station.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_filtered_changi <- weather %>% filter(Station == \"Changi\")\n```\n:::\n\n\n\n## Importing Dengue Data\n\nThe dengue data sets were provided at the courtesy of the National Environment Agency (NEA), Singapore.\n\nThe data set is also publicly available on [NEA website](https://www.nea.gov.sg/dengue-zika/dengue/dengue-cases) and [Ministry of Health website.](https://www.moh.gov.sg/others/resources-and-statistics/infectious-disease-statistics-2024-weekly-infectious-diseases-bulletin)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeekly_dengue <-read_xlsx(\"data/Denguecases.xlsx\", \"Weekly\")\n\nMonthly_dengue <-read_xlsx(\"data/Denguecases.xlsx\", \"Monthly\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Weekly_dengue)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Week                2014              2015              2016      \n Length:54          Min.   :  149.0   Min.   :   91.0   Min.   :   59  \n Class :character   1st Qu.:  212.2   1st Qu.:  172.0   1st Qu.:  135  \n Mode  :character   Median :  294.0   Median :  226.0   Median :  221  \n                    Mean   :  678.7   Mean   :  426.2   Mean   :  495  \n                    3rd Qu.:  437.8   3rd Qu.:  257.0   3rd Qu.:  308  \n                    Max.   :18326.0   Max.   :11294.0   Max.   :13117  \n                                      NA's   :1         NA's   :1      \n      2017             2018             2019            2020      \n Min.   :  24.0   Min.   :  24.0   Min.   :   97   Min.   :  192  \n 1st Qu.:  40.0   1st Qu.:  48.0   1st Qu.:  207   1st Qu.:  362  \n Median :  52.0   Median :  58.0   Median :  287   Median :  423  \n Mean   : 104.4   Mean   : 123.9   Mean   :  603   Mean   : 1306  \n 3rd Qu.:  63.0   3rd Qu.:  75.0   3rd Qu.:  401   3rd Qu.:  918  \n Max.   :2767.0   Max.   :3283.0   Max.   :15979   Max.   :35266  \n NA's   :1        NA's   :1        NA's   :1                      \n      2021             2022            2023             2024        \n Min.   :  42.0   Min.   :  106   Min.   : 100.0   Min.   :   71.0  \n 1st Qu.:  74.0   1st Qu.:  290   1st Qu.: 138.0   1st Qu.:  155.0  \n Median : 104.0   Median :  472   Median : 192.0   Median :  291.0  \n Mean   : 198.4   Mean   : 1214   Mean   : 375.4   Mean   :  515.1  \n 3rd Qu.: 129.0   3rd Qu.:  942   3rd Qu.: 234.0   3rd Qu.:  337.0  \n Max.   :5258.0   Max.   :32173   Max.   :9949.0   Max.   :13651.0  \n NA's   :1        NA's   :1       NA's   :1        NA's   :1        \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Monthly_dengue)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Month/Year             2014            2015            2016      \n Length:13          Min.   :  638   Min.   :  521   Min.   :  276  \n Class :character   1st Qu.: 1024   1st Qu.:  656   1st Qu.:  723  \n Mode  :character   Median : 1436   Median :  941   Median :  986  \n                    Mean   : 2819   Mean   : 1738   Mean   : 2018  \n                    3rd Qu.: 1887   3rd Qu.: 1237   3rd Qu.: 1863  \n                    Max.   :18326   Max.   :11294   Max.   :13117  \n      2017             2018             2019            2020      \n Min.   : 157.0   Min.   : 136.0   Min.   :  440   Min.   : 1077  \n 1st Qu.: 191.0   1st Qu.: 199.0   1st Qu.: 1039   1st Qu.: 1535  \n Median : 246.0   Median : 296.0   Median : 1262   Median : 2116  \n Mean   : 425.7   Mean   : 505.1   Mean   : 2458   Mean   : 5426  \n 3rd Qu.: 254.0   3rd Qu.: 322.0   3rd Qu.: 1796   3rd Qu.: 4851  \n Max.   :2767.0   Max.   :3283.0   Max.   :15979   Max.   :35266  \n      2021             2022            2023           2024      \n Min.   : 220.0   Min.   :  603   Min.   : 489   Min.   :  391  \n 1st Qu.: 340.0   1st Qu.: 1434   1st Qu.: 728   1st Qu.:  726  \n Median : 427.0   Median : 2012   Median : 878   Median : 1224  \n Mean   : 808.9   Mean   : 4950   Mean   :1531   Mean   : 2100  \n 3rd Qu.: 629.0   3rd Qu.: 4210   3rd Qu.: 961   3rd Qu.: 1466  \n Max.   :5258.0   Max.   :32173   Max.   :9949   Max.   :13651  \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_filtered_changi <- weather_filtered_changi %>%\n  mutate(across(\n    c(`Mean Temperature (°C)`, `Maximum Temperature (°C)`, `Minimum Temperature (°C)`,\n      `Daily Rainfall Total (mm)`, `Highest 30 min Rainfall (mm)`, \n      `Highest 60 min Rainfall (mm)`, `Highest 120 min Rainfall (mm)`),\n    ~ na_if(., \"-\")  # replace dash with NA\n  ))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_filtered_changi$Mean_Temperature_C <- as.numeric(weather_filtered_changi$`Mean Temperature (°C)`)\nweather_filtered_changi$Maximum_Temperature_C <- as.numeric(weather_filtered_changi$`Maximum Temperature (°C)`)\nweather_filtered_changi$Minimum_Temperature_C <- as.numeric(weather_filtered_changi$`Minimum Temperature (°C)`)\nweather_filtered_changi$Daily_Rainfall_Total <- as.numeric(weather_filtered_changi$`Daily Rainfall Total (mm)`)\nweather_filtered_changi$Highest_30min_Rainfall <- as.numeric(weather_filtered_changi$`Highest 30 min Rainfall (mm)`)\nweather_filtered_changi$Highest_60min_Rainfall <- as.numeric(weather_filtered_changi$`Highest 60 min Rainfall (mm)`)\nweather_filtered_changi$Highest_120min_Rainfall <- as.numeric(weather_filtered_changi$`Highest 120 min Rainfall (mm)`)\n\nweather_Monthly <- weather_filtered_changi %>%\n  group_by(Year, Month) %>%\n  summarize(\n    AvgMeanTemp = mean(Mean_Temperature_C, na.rm = TRUE),\n    MaxTemp = max(Maximum_Temperature_C, na.rm = TRUE),\n    MinTemp = min(Minimum_Temperature_C, na.rm = TRUE),\n    TotalDailyRain = sum(Daily_Rainfall_Total, na.rm = TRUE),\n    Total30MinRain = sum(Highest_30min_Rainfall, na.rm = TRUE),\n    Total60MinRain = sum(Highest_60min_Rainfall, na.rm = TRUE),\n    Total120MinRain = sum(Highest_120min_Rainfall, na.rm = TRUE),\n  .groups = \"drop\"\n  ) %>%\nmutate(MonthYear = paste0(Year, \"-\", sprintf(\"%02d\", Month)))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nMonthly_dengue_longer <- Monthly_dengue %>%\n  pivot_longer(\n    cols = 2:12,\n    names_to = \"Year\",\n    values_to = \"denguecases\"\n  ) %>%\n  filter(!str_detect(`Month/Year`, \"Total\")) %>%\n  rename(Month = `Month/Year`) %>%\n  mutate(\n    Year = as.numeric(Year),\n    Month = as.numeric(Month),\n    MonthYear = paste0(Year, \"-\", sprintf(\"%02d\", Month))\n  )\n```\n:::\n\n\n\n## Electricity Data Preparing from T3.5 Sheet - Monthly Electricity Consumption by Planning Area & Dwelling Type, 2005 – 2024\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(readr)\nlibrary(zoo)\n\n# Loading raw sheet\nelectricity_raw <- read_excel(\"data/electricityconsumption.xlsx\", sheet = \"T3.5\", col_names = FALSE)\n\n# Extracting year and month headers\nyears_raw <- as.character(electricity_raw[4, ])\nmonths_raw <- as.character(electricity_raw[5, ])\n\n# Forward-filling year values\nyears_filled <- na.locf(years_raw, na.rm = FALSE)\nmonths_filled <- months_raw\n\n# Building proper MonthYear labels\nmonth_year_labels <- ifelse(\n  is.na(years_filled) | is.na(months_filled) | str_detect(tolower(months_filled), \"annual\"),\n  NA,\n  paste0(years_filled, \"-\", sprintf(\"%02d\", as.numeric(months_filled)))\n)\nmonth_year_labels[1] <- \"Region\"\n\n# Removing invalid columns\nvalid_cols <- !is.na(month_year_labels)\nelectricity_raw <- electricity_raw[, valid_cols]\nmonth_year_labels <- month_year_labels[valid_cols]\n\n# Assigning cleaned column names\ncolnames(electricity_raw) <- month_year_labels\n\n# Extract actual data rows\nelectricity_data <- electricity_raw[6:nrow(electricity_raw), ]\n\n# Filter for Changi only\nelectricity_changi <- electricity_data %>%\n  filter(Region == \"Changi\") %>%\n  pivot_longer(\n    cols = -Region,\n    names_to = \"MonthYear\",\n    values_to = \"Electricity_KWh\"\n  ) %>%\n  mutate(\n    Electricity_KWh = if_else(Electricity_KWh %in% c(\"-\", \"s\"), NA_character_, Electricity_KWh),\n    Electricity_KWh = parse_number(Electricity_KWh)\n  ) %>%\n  filter(!is.na(MonthYear) & !is.na(Electricity_KWh))\n```\n:::\n\n\n\n## Combining all Datasets\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data <- Monthly_dengue_longer %>%\n  left_join(weather_Monthly, by = \"MonthYear\") %>%\n  left_join(electricity_changi, by = \"MonthYear\")\n```\n:::\n\n\n\n## Removing Duplicates columns\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data <- combined_data %>%\n  select(-Year.y, -Month.y, -Region)\n```\n:::\n\n\n\n# 4. Time Series Forecasting\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Converting MonthYear to proper date format\ncombined_data <- combined_data %>%\n  mutate(Date = yearmonth(MonthYear))\n\n# Aggregating data by month\ncombined_data_agg <- combined_data %>%\n  group_by(Date) %>%\n  summarise(\n    denguecases = sum(denguecases, na.rm = TRUE),\n    Electricity_KWh = sum(Electricity_KWh, na.rm = TRUE),\n    AvgMeanTemp = mean(AvgMeanTemp, na.rm = TRUE),\n    TotalDailyRain = sum(TotalDailyRain, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Creating tsibble for time series dataframe\ncombined_tsibble <- combined_data_agg %>%\n  as_tsibble(index = Date)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plotting multiple variables for overview\ncombined_tsibble %>%\n  select(Date, denguecases, Electricity_KWh, AvgMeanTemp, TotalDailyRain) %>%\n  pivot_longer(cols = -Date, \n               names_to = \"Variable\", \n               values_to = \"Value\") %>%\n  ggplot(aes(x = Date, y = Value)) +\n  geom_line() +\n  facet_wrap(~ Variable, scales = \"free_y\", ncol = 1) +\n  labs(title = \"Time Series of Dengue, Electricity, and Weather Variables\",\n       x = \"Date\", y = \"Value\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\nAvgMeanTemp\n\n-   Exhibits a highly regular seasonal pattern, peaking mid-year and dipping towards the start and end of each calendar year.\n\n-   The temperature fluctuates between approximately 26°C and 29°C, characteristic of a tropical region.\n\n-   The seasonal pattern is stable and consistent, with no noticeable long-term trend (no significant warming or cooling across years).\n\nImplication: The strong seasonality and stationarity make AvgMeanTemp a suitable candidate for seasonal forecasting models or as a covariate in dengue prediction.\n\nDengue Cases\n\n-   Demonstrates episodic spikes with significant outbreaks occurring around: Early 2015, Mid-2020 Mid-to-late 2023 (the most extreme spike)\n\n-   Post-outbreak, a rapid decline is observed each time, suggesting a return to baseline levels.\n\nImplication: Unlike temperature, dengue cases do not follow a consistent seasonal trend, but show irregular epidemic patterns. These may be triggered by environmental conditions, rainfall, or public health dynamics. Modeling dengue will require accounting for these non-seasonal, high-variance features, potentially using ARIMA, ETS, or hybrid models with external regressors.\n\nElectricity_KWh\n\n-   Shows mild seasonal variation and general stability until late 2023.\n\n-   A noticeable drop in electricity consumption begins in late 2023, reaching near-zero by 2025. The drop is likely due to missing or misreported data, not an actual collapse in consumption.\n\nImplication: Electricity data can provide indirect clues about population behavior or climatic demand (e.g., cooling).\n\nTotalDailyRain\n\n-   Displays high volatility and lacks a regular seasonal cycle.\n\n-   Significant rainfall peaks occur sporadically, notably: Late 2019 (preceding the 2020 dengue outbreak), Mid 2022\n\n-   Some alignment between rainfall surges and subsequent dengue outbreaks, potentially indicating a lagged causal relationship.\n\nImplication: Rainfall may act as a leading indicator for dengue via its influence on mosquito breeding conditions. Cross-correlation or lag analysis is recommended to quantify this relationship for modeling purposes.\n\n## 4.1 Seasonal & Subseries Plots (All variables)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Converting to long format for seasonal and subseries plots\nts_longer <- combined_tsibble %>%\n  select(Date, denguecases, Electricity_KWh, AvgMeanTemp, TotalDailyRain) %>%\n  pivot_longer(cols = -Date, names_to = \"Variable\", values_to = \"Value\")\n\n# Seasonal plots\nts_longer %>%\n  gg_season(Value) +\n  facet_wrap(~ Variable, scales = \"free_y\", ncol = 1) +\n  labs(title = \"Seasonal Patterns of Dengue, Electricity & Weather\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Subseries (Cycle) plots\nts_longer %>%\n  gg_subseries(Value) +\n  facet_wrap(~ Variable, scales = \"free_y\", ncol = 1) +\n  labs(title = \"Cycle Subseries Plots: Trend + Seasonality\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-21-2.png){width=672}\n:::\n:::\n\n\n\n**AvgMeanTemp (Temperature)**\n\nSeasonal Plot:\n\n-   Temperature follows a **strong seasonal cycle**, peaking between **May–July** and dipping during **December–January** every year.\n\n-   Curves are tightly clustered, suggesting **high seasonal consistency** across years.\n\nSubseries Plot:\n\n-   The **blue monthly means** stay mostly stable.\n\n-   Each year’s temperature follows a nearly identical profile → **very reliable seasonal pattern**.\n\n**Implication**: This is a classic seasonal series — perfect candidate for models with additive/multiplicative seasonal components (e.g., ETS(M,A,M)).\n\n**Dengue Cases**\n\nSeasonal Plot:\n\n-   Some years (like **2020**) show **large peaks mid-year** (June–August), but the overall pattern is **inconsistent across years**.\n\n-   Most years stay flat or low — outbreaks are **sporadic**, not regular.\n\nSubseries Plot:\n\n-   Most months have low values, except **occasional extreme outliers** in mid-year months like June and July.\n\n-   Seasonality exists but is **irregular and event-driven** (e.g., epidemics)\n\n**Implication**: Dengue is **not purely seasonal**. Use models that can handle irregular surges — ARIMA or hybrid models with regressors may be better suited.\n\n**Electricity_KWh**\n\nSeasonal Plot:\n\n-   Electricity usage is **fairly stable** month to month with **slight increases mid-year**, likely due to cooling demands in hotter months\n\n-   The 2024 line **drops to zero after July**, signaling **missing data**, not a real-world trend.\n\nSubseries Plot:\n\n-   Minor seasonal variation (slight rise in May–July), but not strong.\n\n-   The subseries emphasizes the sudden drop in 2024, reinforcing the likelihood of **data gaps**.\n\n**Implication**: While not strongly seasonal, this variable may still track with temperature. Handle 2023+ data cautiously due to likely incompleteness.\n\n**TotalDailyRain**\n\nSeasonal Plot:\n\n-   No clear seasonality — rainfall is **highly volatile**, but some spikes tend to occur between **May–September**.\n\n-   Very high values in 2020 and 2023 suggest **extreme rainfall events**.\n\nSubseries Plot:\n\n-   A few months (e.g., May–July) show large variations across years\n\n-   No month consistently shows high rainfall across all years — seasonality is **weak and inconsistent**.\n\n**Implication**: Rainfall doesn’t follow a regular cycle — best treated as a **lagged external driver** of dengue (e.g., via cross-correlation).\n\n## 4.2 Dengue Cases\n\n### 4.2.1 Time Series Decomposition of Dengue Cases (ACF, STL, Classical)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ACF & PACF for Dengue cases\ncombined_tsibble %>%\n  ACF(denguecases) %>%\n  autoplot() +\n  labs(title = \"ACF of Dengue Cases\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncombined_tsibble %>%\n  PACF(denguecases) %>%\n  autoplot() +\n  labs(title = \"PACF of Dengue Cases\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-22-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# Composite plot (Line, ACF, Seasonality)\ncombined_tsibble %>%\n  gg_tsdisplay(denguecases, plot_type = \"partial\") +\n  labs(title = \"Dengue Cases - Trend, ACF, and Seasonality\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-22-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# STL Decomposition\ncombined_tsibble %>%\n  model(STL(denguecases)) %>%\n  components() %>%\n  autoplot() +\n  labs(title = \"STL Decomposition of Dengue Cases\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-22-4.png){width=672}\n:::\n\n```{.r .cell-code}\n# Classical Decomposition\ncombined_tsibble %>%\n  model(classical_decomposition(denguecases, type = \"additive\")) %>%\n  components() %>%\n  autoplot() +\n  labs(title = \"Classical Additive Decomposition of Dengue Cases\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-22-5.png){width=672}\n:::\n:::\n\n\n\nThe ACF plot shows strong autocorrelation for dengue cases up to around lag 3–4 months, meaning dengue cases today are influenced by cases from a few months ago. The PACF plot suggests that a 1-month lag has the most direct influence. This kind of pattern is common in seasonal diseases like dengue.\n\nComposite plot confirms:\n\n1.  Strong seasonality, with dengue peaks recurring yearly.\n\n2.  ACF shows long autocorrelation tail (suggesting non-stationarity).The slow decay in the ACF is indicative of non-stationarity, suggesting the need for differencing before applying ARIMA models.\n\n3.  PACF indicates 1–2 significant lags, which helps in ARIMA modeling later.The PACF plot exhibits a sharp drop after lag 1, suggesting an AR(1) structure, which is common in short-memory processes.\n\nSTL Decomposition:\n\n1.  The trend line reveals rising dengue trends until around 2020, followed by a decline.\n\n2.  Seasonal component shows dengue spikes happen almost every year between June to October—coinciding with rainy seasons in tropical countries.\n\n3.  Remainder shows noise or irregularity not explained by trend or seasonality.\n\nClassical Decomposition:\n\n1.  Similar insights as STL, but less flexible.\n\n2.  Shows strong seasonality and mid-2019 to 2021 surge in trend.\n\n3.  Residuals are still present, which shows the importance of forecasting models to capture these dynamics.\n\nThe analysis decomposed dengue time series into trend, seasonality, and irregular components using both STL and classical methods.STL is particularly helpful because it allows for changing seasonal patterns over time and handles outliers more gracefully compared to classical methods.The STL plot revealed a clear seasonal cycle where dengue cases peak mid-year, aligning with wetter months. ACF and PACF plots showed significant correlation with recent months, highlighting temporal dependency. These insights confirm that dengue has strong yearly patterns, a rising-falling long-term trend, and some random fluctuations. This justifies using seasonal ARIMA or ETS models for better forecasting of future dengue outbreaks.\n\n### 4.2.2 ETS Forecasting of Dengue Cases\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Defining training vs test set (last 12 months as test)\ndengue_ts <- combined_tsibble %>%\n  select(Date, denguecases) %>%\n  mutate(Type = if_else(Date >= yearmonth(\"2024 Jan\"), \"Test\", \"Train\"))\n\ndengue_train <- dengue_ts %>%\n  filter(Type == \"Train\")\n\n# Fitting ETS model\nfit_ets <- dengue_train %>%\n  model(ETS(denguecases))\n\n# Checking residuals\nfit_ets %>% gg_tsresiduals()\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfit_ets %>% report()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: denguecases \nModel: ETS(M,N,M) \n  Smoothing parameters:\n    alpha = 0.9996843 \n    gamma = 0.0001178125 \n\n  Initial states:\n     l[0]      s[0]    s[-1]    s[-2]    s[-3]   s[-4]    s[-5]    s[-6]\n 6554.158 0.8417352 0.785766 0.988454 1.135488 1.22024 1.370364 1.246979\n    s[-7]     s[-8]     s[-9]    s[-10]   s[-11]\n 1.050372 0.7703541 0.7981549 0.7391517 1.052942\n\n  sigma^2:  0.1539\n\n     AIC     AICc      BIC \n2397.179 2401.795 2438.992 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Forecast for 12 months\nfc_ets <- fit_ets %>%\n  forecast(h = \"12 months\")\n\n# Plotting with actual + forecasted + fitted\ndengue_ts %>%\n  ggplot(aes(x = Date, y = denguecases)) +\n  geom_line(aes(color = Type), alpha = 0.8) +\n  autolayer(fc_ets, series = \"Forecast\", alpha = 0.6) +\n  geom_line(data = augment(fit_ets), aes(y = .fitted, color = \"Fitted\")) +\n  labs(title = \"ETS Forecast vs Actual Dengue Cases\",\n       y = \"Dengue Cases\", color = \"\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-23-2.png){width=672}\n:::\n:::\n\n\n\nETS Modeling and Forecasting of Dengue Cases An Exponential Smoothing State Space (ETS) model was used to forecast monthly dengue cases, leveraging historical data up to December 2023.\n\n-   The data was split into training (pre-2024) and testing (2024 onward) sets to evaluate model accuracy.\n\n-   An ETS(M,N,M) model was automatically selected, indicating multiplicative error and seasonality with no trend component.\n\n-   Smoothing parameters suggest that the model gives higher weight to recent values and assumes stable seasonality over time.\n\nResidual diagnostics showed:\n\n-   No significant autocorrelation left in the residuals.\n\n-   Residuals are mostly centered around zero with moderate spread, validating model assumptions.\n\nForecast accuracy:\n\n-   The 12-month forecast captured the seasonal dengue peaks.\n\n-   Actual test values for 2024 were largely within the prediction intervals (80% and 95%).\n\n-   Fitted values closely matched training data.\n\nThese results confirm the ETS model’s ability to effectively capture dengue seasonality and provide reasonably accurate forecasts. This can be useful for early outbreak warnings and public health planning.\n\n### 4.2.3 ARIMA Forecasting + Comparison with ETS\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit ARIMA model\nfit_arima <- dengue_train %>%\n  model(ARIMA(denguecases))\n\n# Model report\nfit_arima %>% report()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: denguecases \nModel: ARIMA(2,0,0)(0,0,1)[12] w/ mean \n\nCoefficients:\n         ar1      ar2    sma1   constant\n      1.1844  -0.3764  0.2177  1390.5368\ns.e.  0.0880   0.0852  0.1020   405.8765\n\nsigma^2 estimated as 14796993:  log likelihood=-1159.95\nAIC=2329.9   AICc=2330.43   BIC=2343.84\n```\n\n\n:::\n\n```{.r .cell-code}\n# Forecast 12 months\nfc_arima <- fit_arima %>%\n  forecast(h = \"12 months\")\n\n# Comparing ETS vs ARIMA model performance\nbind_rows(\n  fit_arima %>% accuracy(),\n  fit_ets %>% accuracy(),\n  fc_arima %>% accuracy(dengue_ts),\n  fc_ets %>% accuracy(dengue_ts)\n) %>%\n  select(.model, .type, RMSE, MAE, MASE, RMSSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 6\n  .model             .type     RMSE   MAE  MASE RMSSE\n  <chr>              <chr>    <dbl> <dbl> <dbl> <dbl>\n1 ARIMA(denguecases) Training 3782. 2386. 0.307 0.322\n2 ETS(denguecases)   Training 3636. 2123. 0.273 0.310\n3 ARIMA(denguecases) Test     4933. 4682. 0.602 0.420\n4 ETS(denguecases)   Test     5137. 4740. 0.609 0.438\n```\n\n\n:::\n:::\n\n\n\nThe ETS (Error-Trend-Seasonality) model was used to forecast dengue cases 12 months beyond the training period. The forecast closely followed historical seasonal trends, and most observed values during the test period fell within the model’s 80% and 95% prediction intervals. This suggests the model captures seasonality well and provides reasonable uncertainty estimates.\n\nHowever, some underestimation occurred during sharp spikes in dengue cases, a common challenge with smoother ETS models that assume regular seasonal structure.\n\nAn ARIMA(2,0,0)(0,0,1)\\[12\\] model was also fitted, which includes:\n\n-   Two autoregressive (AR) terms to capture short-term memory,\n\n-   A seasonal moving average (SMA) term at lag 12 to model annual seasonality,\n\n-   No differencing, indicating the data is already stationary.\n\nAlthough the AIC and BIC values for ARIMA were slightly higher than those of ETS, indicating a marginally worse fit to the training data, the ARIMA model performed better on the test set based on forecast accuracy metrics:\n\n-   Lower RMSE and RMSSE on test data,\n\n-   MASE \\< 1 for both models, confirming both outperform a naïve seasonal benchmark.\n\nThese results suggest:\n\n-   ETS is better at fitting past values (in-sample), and offers a more interpretable model structure.\n\n-   ARIMA generalizes better to unseen data (out-of-sample), making it more suitable for forecasting in real-world settings.\n\nOverall, both models effectively captured the strong seasonal structure of dengue outbreaks. ETS may be preferred when stability and interpretability are needed, whereas ARIMA may be more useful when forecasting accuracy is the top priority.\n\n### 4.2.4 Forecast Plots for ETS vs ARIMA\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plotting Forecasts from Both Models for Comparison\nfc_ets %>%\n  autoplot(dengue_ts, level = NULL) +\n  autolayer(fc_arima, colour = \"red\", level = NULL) +\n  labs(title = \"Forecast Comparison: ETS (blue) vs ARIMA (red)\",\n       y = \"Dengue Cases\", x = \"Date\") +\n  scale_color_manual(values = c(\"Forecast\" = \"blue\", \"ARIMA\" = \"red\")) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n\nThe forecast comparison plot overlays the predicted dengue cases from both ETS and ARIMA models for the test period (2024 onward):\n\n-   Historical trend (black line) shows clear annual peaks with recent decline into 2024.\n\n-   ETS forecast (blue) continues a smoothed seasonal trend, slightly overpredicting dengue in the latter months.\n\n-   ARIMA forecast (red) exhibits a flatter trajectory, indicating a more conservative response to the recent drop in cases.\n\n-   Both forecasts attempt to follow the general seasonal pattern, but diverge slightly in magnitude and turning points.\n\nThe visual comparison between ETS and ARIMA forecasts shows both models track recent dengue patterns but with subtle differences. ETS maintains a smoother seasonal pattern, while ARIMA is more responsive to the recent downturn, producing lower forecasts in the early months of 2024. The divergence underscores how different model structures handle trend and seasonality. While ETS may better represent long-term seasonality, ARIMA may better reflect recent changes in dynamics. This reinforces the importance of selecting a model aligned with the forecasting goal—whether short-term responsiveness or long-term seasonal stability.\n\n## 4.3 Decomposition of All Variables (Trend + Seasonality)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Decompose AvgMeanTemp, Electricity_KWh, TotalDailyRain\n\n# Converting to long format and decompose each using STL\ncombined_tsibble %>%\n  pivot_longer(cols = c(AvgMeanTemp, Electricity_KWh, TotalDailyRain),\n               names_to = \"Variable\", values_to = \"Value\") %>%\n  group_by(Variable) %>%\n  model(STL(Value)) %>%\n  components() %>%\n  autoplot() +\n  labs(title = \"STL Decomposition of Weather and Electricity Variables\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n\nThe STL decomposition plot separates each variable into trend, seasonal, and remainder (residual) components, offering deeper insights into their temporal behavior.\n\n-   Electricity_KWh (green): Shows a steady upward trend until around 2022, followed by a sharp decline, possibly due to external disruptions (e.g., policy shifts, data gaps, or economic factors). The seasonal pattern is strong and consistent, reflecting cyclical consumption behaviors — likely tied to climate or activity cycles.\n\n-   TotalDailyRain (blue): Exhibits pronounced seasonal variation with clear annual peaks and troughs, aligning with expected monsoon or wet seasons. The trend rises steadily until about 2022–2023 before declining, potentially pointing to changing rainfall intensity or data completeness issues.\n\n-   AvgMeanTemp (red): Remains relatively flat across all components, with minimal visible trend or seasonal amplitude. This suggests temperature is more stable over time, or its variation is less influential compared to the other variables.\n\nOverall, the STL decomposition effectively isolates long-term trends from recurring seasonal patterns and residual noise. This helps in identifying stable patterns versus anomalies and informs the design of more robust forecasting models — especially when assessing dengue outbreaks in relation to climate and electricity factors.\n\n## 4.4 Trend Exploration Between Variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Forcing it into a regular data frame to avoid tsibble-related metadata\ncor_data <- combined_tsibble %>%\n  as_tibble() %>%  # dropping tsibble-specific indexing\n  select(denguecases, AvgMeanTemp, TotalDailyRain, Electricity_KWh) %>%\n  mutate(across(everything(), as.numeric))  # force all to numeric\n\n# Computing correlation matrix\ncor_matrix <- cor(cor_data, use = \"complete.obs\") %>%\n  round(2)\n\n# Result\ncor_matrix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                denguecases AvgMeanTemp TotalDailyRain Electricity_KWh\ndenguecases            1.00        0.13           0.11            0.25\nAvgMeanTemp            0.13        1.00          -0.35            0.15\nTotalDailyRain         0.11       -0.35           1.00            0.17\nElectricity_KWh        0.25        0.15           0.17            1.00\n```\n\n\n:::\n:::\n\n\n\nThe correlation matrix provides an overview of linear relationships between dengue cases, weather factors, and electricity usage.\n\nDengue cases show a weak positive correlation with:\n\n-   Electricity consumption (0.25): This could reflect increased indoor activity or reporting during higher usage periods.\n\n-   Average temperature (0.13) and rainfall (0.11): Slight associations, possibly due to mosquito breeding environments but not strongly linear.\n\nAverage temperature and total rainfall are negatively correlated (-0.35) — possibly reflecting seasonal climatic cycles (e.g., lower temperatures during rainy months).\n\nElectricity_KWh has small positive correlations with all other variables, hinting at indirect links to environmental and behavioral factors.\n\nOverall, no strong linear correlation exists, but weak signals support the idea of seasonal and environmental influence on dengue trends. These patterns align with earlier STL and decomposition findings, reinforcing the importance of incorporating seasonality and nonlinear dynamics in forecasting models.\n\n## 4.5 Cross-correlation (CCF) to Explore Lag Effects\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Checking if rainfall or temperature leads to changes in dengue cases\n\ncombined_tsibble %>%\n  CCF(denguecases, TotalDailyRain) %>%\n  autoplot() +\n  labs(title = \"CCF: Dengue Cases vs Total Rainfall\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncombined_tsibble %>%\n  CCF(denguecases, AvgMeanTemp) %>%\n  autoplot() +\n  labs(title = \"CCF: Dengue Cases vs Avg Temp\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-28-2.png){width=672}\n:::\n:::\n\n\n\nDengue Cases vs. Total Rainfall - The CCF plot shows significant positive correlations at lags 5 to 10 months, peaking around lag 6–7.\n\n-   Interpretation: This suggests that rainfall leads dengue outbreaks by \\~6–7 months. This makes biological sense — increased rain can enhance mosquito breeding grounds, which over time leads to higher dengue incidence.\n\n-   Implication: Rainfall is a useful early predictor for dengue case forecasting. Interventions (e.g., mosquito control) should ideally begin several months after heavy rains.\n\nDengue Cases vs. Avg Temperature - The CCF plot shows weaker correlations but some positive values and negative spikes beyond lag 3.\n\n-   Interpretation: Temperature has a modest positive correlation shortly before or around the outbreak, possibly due to optimal mosquito survival conditions.\n\n-   The negative lags may reflect post-outbreak climatic cooling or statistical noise.\n\nOverall: Temperature may play a supportive but less dominant role compared to rainfall in triggering outbreaks\n\n## 4.6 Build Forecasting Models for Weather & Electricity\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tsibble)\nlibrary(fable)\nlibrary(lubridate)\nlibrary(fabletools)\n\n# Filtering training data (before Jan 2024)\ntrain_data <- combined_tsibble %>%\n  filter(Date < yearmonth(\"2024 Jan\"))\n\n# Fit ETS models separately\nmodel_temp <- train_data %>% model(ETS(AvgMeanTemp))\nmodel_rain <- train_data %>% model(ETS(TotalDailyRain))\nmodel_elec <- train_data %>% model(ETS(Electricity_KWh))\n\n# Forecast individually for 12 months ahead\nfc_temp <- model_temp %>% forecast(h = \"12 months\")\nfc_rain <- model_rain %>% forecast(h = \"12 months\")\nfc_elec <- model_elec %>% forecast(h = \"12 months\")\n\n# Converting forecasts to tibbles, remove distribution column, and label them\nfc_temp_df <- fc_temp %>% as_tibble() %>% select(Date, .mean) %>% mutate(Variable = \"AvgMeanTemp\")\nfc_rain_df <- fc_rain %>% as_tibble() %>% select(Date, .mean) %>% mutate(Variable = \"TotalDailyRain\")\nfc_elec_df <- fc_elec %>% as_tibble() %>% select(Date, .mean) %>% mutate(Variable = \"Electricity_KWh\")\n\n# Combining into one tidy dataframe\nweather_fc <- bind_rows(fc_temp_df, fc_rain_df, fc_elec_df)\n\n# Plotting forecasted weather & electricity\nweather_fc %>%\n  ggplot(aes(x = Date, y = .mean, color = Variable)) +\n  geom_line(size = 1) +\n  facet_wrap(~ Variable, scales = \"free_y\") +\n  labs(\n    title = \"Forecasts: Weather & Electricity (Next 12 Months)\",\n    y = \"Forecasted Value\",\n    x = \"Date\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n\nThe plot presents 12-month ETS-based forecasts (Jan–Dec 2024) for three key variables: average temperature, total rainfall, and electricity consumption.\n\nAvgMeanTemp (Temperature) - Exhibits a strong and smooth seasonal pattern, peaking during April to July, then gradually declining. - This aligns well with historical climate patterns and confirms ETS’s suitability for temperature forecasting due to its consistent cyclical nature.\n\nTotalDailyRain (Rainfall) - Shows greater volatility and sharper fluctuations, with a peak forecast toward late 2024. - These spikes likely correspond to rainy or monsoon seasons, which are important precursors for mosquito breeding and, hence, dengue outbreaks.\n\nElectricity_KWh - Remains relatively stable, with a notable mid-year peak—likely due to increased cooling demand during hotter months. - This again reflects seasonal human behavior and infrastructure load, reinforcing patterns seen in past data.\n\n## 4.7 Accuracy Comparison for Weather Forecasts\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Getting actual test data for Jan 2024 onwards\ntest_data <- combined_tsibble %>%\n  filter(Date >= yearmonth(\"2024 Jan\")) %>%\n  select(Date, AvgMeanTemp, TotalDailyRain, Electricity_KWh)\n\n# Computing forecast accuracy before converting to tibble\n\n# Temp forecast accuracy\nacc_temp <- accuracy(fc_temp, test_data %>% select(Date, AvgMeanTemp)) %>%\n  mutate(Variable = \"AvgMeanTemp\")\n\n# Rain forecast accuracy\nacc_rain <- accuracy(fc_rain, test_data %>% select(Date, TotalDailyRain)) %>%\n  mutate(Variable = \"TotalDailyRain\")\n\n# Elec forecast accuracy\nacc_elec <- accuracy(fc_elec, test_data %>% select(Date, Electricity_KWh)) %>%\n  mutate(Variable = \"Electricity_KWh\")\n\n# Combining all into one summary table\nweather_accuracy <- bind_rows(acc_temp, acc_rain, acc_elec) %>%\n  select(Variable, .model, .type, RMSE, MAE, MAPE)\n\n# Results\nweather_accuracy\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 6\n  Variable        .model               .type     RMSE      MAE   MAPE\n  <chr>           <chr>                <chr>    <dbl>    <dbl>  <dbl>\n1 AvgMeanTemp     ETS(AvgMeanTemp)     Test     0.355    0.296   1.05\n2 TotalDailyRain  ETS(TotalDailyRain)  Test  1709.    1439.    499.  \n3 Electricity_KWh ETS(Electricity_KWh) Test  1895.    1436.    Inf   \n```\n\n\n:::\n:::\n\n\n\nThe ETS model performed exceptionally well for forecasting average temperature, with low RMSE and a MAPE below 2%. This indicates the model was able to capture the stable seasonal structure of temperature effectively, aligning well with earlier decomposition results that showed clear yearly cycles.\n\nIn contrast, forecasting performance for rainfall and electricity consumption was noticeably weaker:\n\n-   Rainfall showed an extremely high MAPE, driven by its erratic and spiky behavior. ETS models, which assume smooth seasonality, struggle with this level of variability.\n\n-   Electricity consumption forecasting was also less accurate. The model's error was largely influenced by no data from mid 2024, which the model could not anticipate due to its reliance on historical seasonal patterns.\n\nThese findings underscore an important limitation of basic ETS models: while they excel in capturing regular, repeating seasonal patterns, they may fail to adapt to sudden structural changes or highly volatile series.\n\n## 4.8 Forecast Comparison: ARIMA vs ETS (Rainfall & Electricity Only)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fitting ARIMA models on training data\nmodel_rain_arima <- train_data %>% model(ARIMA(TotalDailyRain))\nmodel_elec_arima <- train_data %>% model(ARIMA(Electricity_KWh))\n\n# Generating 12-month forecasts\nfc_rain_arima <- model_rain_arima %>% forecast(h = \"12 months\")\nfc_elec_arima <- model_elec_arima %>% forecast(h = \"12 months\")\n\n# Accuracy comparison on test data (Jan 2024 onwards)\nacc_rain_compare <- bind_rows(\n  accuracy(fc_rain, test_data %>% select(Date, TotalDailyRain)) %>% mutate(Variable = \"TotalDailyRain\", Model = \"ETS\"),\n  accuracy(fc_rain_arima, test_data %>% select(Date, TotalDailyRain)) %>% mutate(Variable = \"TotalDailyRain\", Model = \"ARIMA\")\n)\n\nacc_elec_compare <- bind_rows(\n  accuracy(fc_elec, test_data %>% select(Date, Electricity_KWh)) %>% mutate(Variable = \"Electricity_KWh\", Model = \"ETS\"),\n  accuracy(fc_elec_arima, test_data %>% select(Date, Electricity_KWh)) %>% mutate(Variable = \"Electricity_KWh\", Model = \"ARIMA\")\n)\n\n# Combining accuracy metrics\nweather_compare <- bind_rows(acc_rain_compare, acc_elec_compare) %>%\n  select(Variable, Model, RMSE, MAE, MAPE)\n\n# Plotting forecast accuracy comparison\nweather_compare %>%\n  pivot_longer(cols = c(RMSE, MAE, MAPE), names_to = \"Metric\", values_to = \"Value\") %>%\n  ggplot(aes(x = Model, y = Value, fill = Model)) +\n  geom_col(position = \"dodge\") +\n  facet_grid(Metric ~ Variable, scales = \"free_y\") +\n  labs(\n    title = \"ETS vs ARIMA Forecast Accuracy: Rainfall & Electricity\",\n    y = \"Error Metric Value\",\n    x = \"Model Type\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](Time_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n\nThe bar plot presents a side-by-side comparison of forecast accuracy between ETS and ARIMA models for rainfall and electricity consumption, evaluated using three common error metrics: RMSE, MAE, and MAPE.\n\nAcross both variables—TotalDailyRain and Electricity_KWh—ETS consistently outperforms ARIMA on all three metrics.\n\nThis suggests that ETS may better capture the underlying time series patterns, particularly in datasets with strong seasonal components and smoother trends.\n\nThe lower errors from ETS indicate more accurate and stable forecasts, making it a more reliable choice in this context.\n\nWhile ARIMA remains a flexible model for handling noise and irregularities, in this case, ETS offers both superior accuracy and simplicity, especially for climate-related and consumption data that exhibit seasonality.\n\nThese results support the idea that ETS is well-suited for structured, seasonal data, while ARIMA may still be useful for more irregular or highly autocorrelated series. The final model choice should consider both accuracy and the specific characteristics of the variable being forecasted.\n\nThese results support the idea that ARIMA is more adaptable to non-linear patterns often found in climate-related and consumption variables, while ETS remains strong for seasonal data with stable trends. Model choice may ultimately depend on the complexity of the variable and the forecasting context.\n",
    "supporting": [
      "Time_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}