{
  "hash": "ebaf7362d751254a9de2cb282a76c74d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Preparation\"\nauthor: \"Sei Sar Hla Kyi, Sathvika Subramanian, Dew Stella Chan\"\ndate: \"2025-03-10\"\ndate-modified: \"last-modified\"\nexecute:\n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n\nThe following document details the data preparation process for the building the prototype for the shiny app of this project assignment.\n\n## Libraries Used for Data Preparation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, readxl)\n```\n:::\n\n\n\n## Importing data sets\n\nThe climate data set was being scraped from [Meteorological Service Website, Singapore](https://www.weather.gov.sg/climate-historical-daily/) using beautiful soup python package.\n\nThe scraped historical daily weather records in Singapore were then combined using python into one csv file and loaded in R Studio.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather<- read_csv(\"data/combined_weather_data.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(weather)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Station               Year          Month             Day       \n Length:446491      Min.   :2005   Min.   : 1.000   Min.   : 1.00  \n Class :character   1st Qu.:2012   1st Qu.: 4.000   1st Qu.: 8.00  \n Mode  :character   Median :2017   Median : 7.000   Median :16.00  \n                    Mean   :2017   Mean   : 6.539   Mean   :15.73  \n                    3rd Qu.:2021   3rd Qu.:10.000   3rd Qu.:23.00  \n                    Max.   :2025   Max.   :12.000   Max.   :31.00  \n                    NA's   :850    NA's   :850      NA's   :850    \n Daily Rainfall Total (mm) Highest 30 min Rainfall (mm)\n Length:446491             Length:446491               \n Class :character          Class :character            \n Mode  :character          Mode  :character            \n                                                       \n                                                       \n                                                       \n                                                       \n Highest 60 min Rainfall (mm) Highest 120 min Rainfall (mm)\n Length:446491                Length:446491                \n Class :character             Class :character             \n Mode  :character             Mode  :character             \n                                                           \n                                                           \n                                                           \n                                                           \n Mean Temperature (°C) Maximum Temperature (°C) Minimum Temperature (°C)\n Length:446491         Length:446491            Length:446491           \n Class :character      Class :character         Class :character        \n Mode  :character      Mode  :character         Mode  :character        \n                                                                        \n                                                                        \n                                                                        \n                                                                        \n Mean Wind Speed (km/h) Max Wind Speed (km/h) Highest 30 Min Rainfall (mm)\n Length:446491          Length:446491         Length:446491               \n Class :character       Class :character      Class :character            \n Mode  :character       Mode  :character      Mode  :character            \n                                                                          \n                                                                          \n                                                                          \n                                                                          \n Highest 60 Min Rainfall (mm) Highest 120 Min Rainfall (mm)\n Length:446491                Length:446491                \n Class :character             Class :character             \n Mode  :character             Mode  :character             \n                                                           \n                                                           \n                                                           \n                                                           \n```\n\n\n:::\n:::\n\n\n\nThe dengue data sets were provided at the courtesy of the National Environment Agency (NEA), Singapore.\n\nThe data set is also publicly available on [NEA website](https://www.nea.gov.sg/dengue-zika/dengue/dengue-cases) and [Ministry of Health website.](https://www.moh.gov.sg/others/resources-and-statistics/infectious-disease-statistics-2024-weekly-infectious-diseases-bulletin)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeekly_dengue <-read_xlsx(\"data/Denguecases.xlsx\", \"Weekly\")\n\nMonthly_dengue <-read_xlsx(\"data/Denguecases.xlsx\", \"Monthly\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Weekly_dengue)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Week                2014              2015              2016      \n Length:54          Min.   :  149.0   Min.   :   91.0   Min.   :   59  \n Class :character   1st Qu.:  212.2   1st Qu.:  172.0   1st Qu.:  135  \n Mode  :character   Median :  294.0   Median :  226.0   Median :  221  \n                    Mean   :  678.7   Mean   :  426.2   Mean   :  495  \n                    3rd Qu.:  437.8   3rd Qu.:  257.0   3rd Qu.:  308  \n                    Max.   :18326.0   Max.   :11294.0   Max.   :13117  \n                                      NA's   :1         NA's   :1      \n      2017             2018             2019            2020      \n Min.   :  24.0   Min.   :  24.0   Min.   :   97   Min.   :  192  \n 1st Qu.:  40.0   1st Qu.:  48.0   1st Qu.:  207   1st Qu.:  362  \n Median :  52.0   Median :  58.0   Median :  287   Median :  423  \n Mean   : 104.4   Mean   : 123.9   Mean   :  603   Mean   : 1306  \n 3rd Qu.:  63.0   3rd Qu.:  75.0   3rd Qu.:  401   3rd Qu.:  918  \n Max.   :2767.0   Max.   :3283.0   Max.   :15979   Max.   :35266  \n NA's   :1        NA's   :1        NA's   :1                      \n      2021             2022            2023             2024        \n Min.   :  42.0   Min.   :  106   Min.   : 100.0   Min.   :   71.0  \n 1st Qu.:  74.0   1st Qu.:  290   1st Qu.: 138.0   1st Qu.:  155.0  \n Median : 104.0   Median :  472   Median : 192.0   Median :  291.0  \n Mean   : 198.4   Mean   : 1214   Mean   : 375.4   Mean   :  515.1  \n 3rd Qu.: 129.0   3rd Qu.:  942   3rd Qu.: 234.0   3rd Qu.:  337.0  \n Max.   :5258.0   Max.   :32173   Max.   :9949.0   Max.   :13651.0  \n NA's   :1        NA's   :1       NA's   :1        NA's   :1        \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Monthly_dengue)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Month/Year             2014            2015            2016      \n Length:13          Min.   :  638   Min.   :  521   Min.   :  276  \n Class :character   1st Qu.: 1024   1st Qu.:  656   1st Qu.:  723  \n Mode  :character   Median : 1436   Median :  941   Median :  986  \n                    Mean   : 2819   Mean   : 1738   Mean   : 2018  \n                    3rd Qu.: 1887   3rd Qu.: 1237   3rd Qu.: 1863  \n                    Max.   :18326   Max.   :11294   Max.   :13117  \n      2017             2018             2019            2020      \n Min.   : 157.0   Min.   : 136.0   Min.   :  440   Min.   : 1077  \n 1st Qu.: 191.0   1st Qu.: 199.0   1st Qu.: 1039   1st Qu.: 1535  \n Median : 246.0   Median : 296.0   Median : 1262   Median : 2116  \n Mean   : 425.7   Mean   : 505.1   Mean   : 2458   Mean   : 5426  \n 3rd Qu.: 254.0   3rd Qu.: 322.0   3rd Qu.: 1796   3rd Qu.: 4851  \n Max.   :2767.0   Max.   :3283.0   Max.   :15979   Max.   :35266  \n      2021             2022            2023           2024      \n Min.   : 220.0   Min.   :  603   Min.   : 489   Min.   :  391  \n 1st Qu.: 340.0   1st Qu.: 1434   1st Qu.: 728   1st Qu.:  726  \n Median : 427.0   Median : 2012   Median : 878   Median : 1224  \n Mean   : 808.9   Mean   : 4950   Mean   :1531   Mean   : 2100  \n 3rd Qu.: 629.0   3rd Qu.: 4210   3rd Qu.: 961   3rd Qu.: 1466  \n Max.   :5258.0   Max.   :32173   Max.   :9949   Max.   :13651  \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nweather$Mean_Temperature_C <- as.numeric(weather$`Mean Temperature (°C)`)\nweather$Maximum_Temperature_C <- as.numeric(weather$`Maximum Temperature (°C)`)\nweather$Minimum_Temperature_C <- as.numeric(weather$`Minimum Temperature (°C)`)\n\n\nweather_Monthly <- weather %>%\n  group_by(Year, Month) %>%\n  summarize(\n    AvgMeanTemp = mean(Mean_Temperature_C, na.rm = TRUE),\n    MaxTemp = max(Maximum_Temperature_C, na.rm = TRUE),\n    MinTemp = min(Minimum_Temperature_C, na.rm = TRUE)\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nMonthly_dengue_longer <- Monthly_dengue %>%\n  pivot_longer(\n    cols = 2:12,\n    names_to = \"Year\",\n    values_to = \"denguecases\"\n  )%>%filter(!str_detect(`Month/Year`, \"Total\")) %>%\n  rename(Month = `Month/Year`)\n\n\nMonthly_dengue_longer$Year <- as.numeric(Monthly_dengue_longer$Year)\nMonthly_dengue_longer$Month<- as.numeric(Monthly_dengue_longer$Month)\nprint(Monthly_dengue_longer)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 132 × 3\n   Month  Year denguecases\n   <dbl> <dbl>       <dbl>\n 1     1  2014        1887\n 2     1  2015         982\n 3     1  2016        2428\n 4     1  2017         298\n 5     1  2018         298\n 6     1  2019        1071\n 7     1  2020        1729\n 8     1  2021         647\n 9     1  2022         603\n10     1  2023        1016\n# ℹ 122 more rows\n```\n\n\n:::\n:::\n\n\n\n## Combining of the temperature and dengue case data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data <- Monthly_dengue_longer %>%   left_join(weather_Monthly, by = c(\"Year\", \"Month\"))\n```\n:::\n\n\n\n## Exporting processed data frames to csv files to be visualised in Shiny App\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite.csv(Monthly_dengue_longer, file = \"C:/dewschan/Grp7_Shiny/data/Monthly_dengue_longer.csv\", row.names = FALSE)\n\nwrite.csv(weather_Monthly, file = \"C:/dewschan/Grp7_Shiny/data/weather_Monthly.csv\", row.names = FALSE)\n\nwrite.csv(combined_data, file = \"C:/dewschan/Grp7_Shiny/data/combined_data.csv\", row.names = FALSE)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}